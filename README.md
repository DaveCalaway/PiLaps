# PiLapse
Transform your Raspberry Pi in a Timelapse machine! Â  
Plus you can take a single shot!  

Instructable guide: http://www.instructables.com/id/PiLapse-Raspberry-Pi-Timelapse/


<p align="center">
<img src="https://raw.githubusercontent.com/DaveCalaway/PiLapse/master/image/beta.jpg" width="400">
</p>

## Install & Run
#### Preliminal steps
You need only this package on Raspbian Jessie: `sudo apt-get install libav-tools`  

Run this command on terminal: `vcgencmd get_camera`  


**Supported** and **Detected** must be **1**, or the script does not run.   
IF Supported is 0, run this command on terminal `sudo raspi-config` and enable the camera.   
If Detected is 0, the camera is not connected to the Raspi.   

**Download** the script folder from GitHub or run this command: `git clone https://github.com/DaveCalaway/PiLapse`   
**Install** The folder "PiLapse" MUST stay at "/home/pi/" and you can install the script by running the `python3 Install.py`.  
The script will start autonomously every time the RPi boot.  

If do you want to use a RGB led, check if it's an Anode or Cathode common!  
If it's an Anode common, the code is ok, but if you have an Cathode common, open the `PiLapse.py` file and edit *Anode = 0* in the *VARIABLES*.  

## Operation Mode:
### Terminal mode
This terminal version help you to control the period, frequency and folder name for a timelapse.  
It's very useful to use with the SSH from remote computer.  
You can run it by run the `python3 PiLapse_terminal.py` and follow the guide.   


### Button mode
The Daemon version help you to control the TimeLapse with an external button.  
The Daemon run continuously.  
<p align="center">
<img src="https://raw.githubusercontent.com/DaveCalaway/PiLapse/master/image/schematic_bb.png" width="400">
</p>

#### Single shot
Enabled by pressing the button one time.  

#### Time Lapse
Enabled by hold down the button for 3 or more seconds.  
It takes 1 pic every 10 second by default. Press the button again to end the time lapse.  
You can change this default period by opening the `PiLapse.py` file and edit the *VARIABLES* -> freq_button.  
It creates a folder called "year-month-day time".


## DropBox upload
You can upload your photos and timelapse directly on DropBox. Run this comand only the first time:  
`cd /home/pi/PiLapse/`  
`curl "https://raw.githubusercontent.com/andreafabrizi/Dropbox-Uploader/master/dropbox_uploader.sh" -o dropbox_uploader.sh`  
`chmod +x dropbox_uploader.sh`  
 
Now run: `./dropbox_uploader.sh`  and follow the guide.

#### Variable for DropBox
If you want to change those, open the `PiLapse.py` file and edit the *VARIABLES*.  

`delate_timelapse = True` 
False = leave the dirName with TimeLapse and photos on Raspberry / True = delate the dirName with TimeLapse and photos

`dropbox_timelapse_button = True` 
False = not load the photos and TimeLapse on dropbox generated by button mode/ True = load the photos and TimeLapse on dropbox generated by button mode

`delate_SingleShot = True` 
False = leave photo on Raspberry / True = delate photo on Raspberry


## Standard file size
The RPi Camera has a resolution of 1280, 720. This is a default size for photos and Timelapse:  
<p align="center">
<img src="https://github.com/DaveCalaway/PiLapse/blob/master/image/output_dimension.png" width="400">  
</p>
If you want to change those, open the `PiLapse.py` file and edit the *VARIABLES*.  

## Service status
Very useful command to control the service called "**PiLapse.service**":
* sudo systemctl start PiLapse.service
* sudo systemctl stop PiLapse.service
* sudo systemctl status PiLapse.service:  
  * This is the most useful command, that checks what the service doing
* sudo systemctl enable PiLapse.service

## Hardware test
RasPi 1 | RasPi 2 | RasPi3
------------ | ------------- | -------------
Tested | Tested | not tested
BetaV0.1 | BetaV0.1 | Probably works

----------
*DaveCalaway*
